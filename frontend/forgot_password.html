<!doctype html>
<html lang="th">
<head>
  <meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>ลืมรหัสผ่าน — EdTech</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="min-h-screen bg-slate-50 flex items-center justify-center p-6">
  <div class="w-full max-w-md bg-white p-8 rounded-2xl shadow">
    <h1 class="text-2xl font-bold mb-2 text-center">ลืมรหัสผ่าน?</h1>
    <p class="text-slate-500 text-sm text-center mb-6">กรอกอีเมลของคุณเพื่อรับลิงก์ตั้งรหัสผ่านใหม่</p>
    <form id="form" class="space-y-4">
      <input id="email" type="email" placeholder="Email" class="w-full border rounded-lg p-3" required />
      <button class="w-full rounded-xl p-3 bg-black text-white hover:bg-slate-800 transition">ส่งลิงก์กู้คืน</button>
    </form>
    <p class="text-sm mt-4 text-center text-slate-500">
      <a href="./login.html" class="underline hover:text-black">กลับหน้าเข้าสู่ระบบ</a>
    </p>
  </div>
  <script>
    const API = (window.location.hostname==="127.0.0.1"||window.location.hostname==="localhost")?"https://edtech-api-zigm.onrender.com":"https://edtech-api-zigm.onrender.com";
    document.getElementById("form").onsubmit = async (e) => {
      e.preventDefault();
      const btn = e.target.querySelector("button");
      btn.disabled = true; btn.textContent = "กำลังส่ง...";
      try {
        const res = await fetch(`${API}/auth/forgot-password`, {
          method: "POST", headers: {"Content-Type":"application/json"},
          body: JSON.stringify({email: document.getElementById("email").value})
        });
        alert("✅ กรุณาตรวจสอบอีเมลของคุณ (เช็คถังขยะด้วยนะ)");
      } catch(e) { alert("เกิดข้อผิดพลาด"); }
      btn.disabled = false; btn.textContent = "ส่งลิงก์กู้คืน";
    };
  </script>
</body>
</html>